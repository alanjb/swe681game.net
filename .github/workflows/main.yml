name: CI

on:
  push:
    branches: [ main ]
jobs:
  main:
    strategy:
      matrix:
        node: [12]
      runs-on: ubuntu-latest
      steps:
        - name: 🛑 Cancel Previous Runs
          uses: styfle/cancel-workflow-action@0.9.1

        - name: ⬇️ Checkout repo
          uses: actions/checkout@v2.3.4

        - name: ⎔ Setup node
          uses: actions/setup-node@v2.4.0
          with:
            node-version: ${{ matrix.node }}

        - name: 📥 Download deps
          uses: bahmutov/npm-install@v1.6.0
          env:
            NODE_ENV: production

        - name: ▶️ Build
          run: yarn && yarn build
